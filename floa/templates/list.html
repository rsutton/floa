{% extends 'base.html' %}

{% block header %}
<h1 align="center">{% block title %}Library of America Catalog{% endblock %}</h1>
{% endblock %}

{% block content %}
<script>
    "use strict";
    $(document).ready(function() {
        $('input[type=checkbox]').each(function(){
            if ( $(this).prop("value") == 1){
                $(this).prop("checked", true);
            }
        });

        $('input[type=checkbox]').click(function(e){
            var checkName = $(this).prop('name')
            var checkId = $(this).prop('id')
            var checkValue = $(this).prop('checked')
            if ( checkValue == true ){
                var url = $SCRIPT_ROOT + "/_" + checkName + "/" + checkId;
            } else {
                var url = $SCRIPT_ROOT + "/_reset/" + checkId;
            }
            $.ajax({
                url: url,
                success: function(){location.reload()}
            });
        });
    });
</script>
    <table class="table">
        <thead class="thead-dark">
            <tr>
            <th style="text-align:center" scope="col">Vol</th>
            <th scope="col">Title</th>
            <th style="text-align:center" scope="col">Have</th>
            <th style="text-align:center" scope="col">Want</th>
            <th style="text-align:right" scope="col">{{ list|count }} items</th>
            </tr>
        </thead>
        <tbody>
        {% for book in list %}
        <tr>
            <td style="text-align:center">{{ book['id'] }}</td>
            <th scope="row"><a href={{ book['link'] }}>{{ book['title'] }}</a></th>
            <td style="text-align:center"><input id={{ book['id'] }} type="checkbox" name="have" value={{ book['have'] }}></td>
            <td style="text-align:center"><input id={{ book['id'] }} type="checkbox" name="want" value={{ book['want'] }}></td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}